# 需求文档：可选部分

以下内容不急着在当前版本实现，或者实现方式待探讨。

## 脚本化工具调用

- 参考文档：[Programmatic Tool Calling](https://platform.claude.com/docs/en/agents-and-tools/tool-use/programmatic-tool-calling)

## 记忆系统

目前记忆系统已经有很多方案，例如Mem0、OpenViking。

### A. 信息获取

现有的方案的执行方式是，在代码/插件层面，截获上下文内容，然后在外部新建一个模型会话进行整理。
这个方法能够获取到完整的上下文内容，但也会出现多轮对话导致的缓存读额外开销。

- 个人推荐：在多Agent状态下，记忆系统只需要存以下内容：
  - Explore的结果/报告。
  - 每次对话解决的问题，以及在此过程中用户的偏好。

### B. 信息整理

看了一下现有方案：

- Mem0：是个外置数据库，实现未知，需要提供专用API Key。
- OpenClaw：双层存储（`MEMORY.md`/`SOUL.md`等 + `YYYY-MM-DD.md`），单层记忆加载。官方推荐使用字符串查询/Embedding等方式加速搜索。
- OpenViking：功能完备，三层记忆加载框架。必需图像处理模型，Embeddings模型。

- 个人推荐：实现一个简单的记忆管理系统。
  - 记忆加载，最多两层就足够了。这两层分别是：
    1. （始终加载）标题 + 摘要
    2. （模型主动加载）完整内容
    - 一旦模型决定激活记忆内容，一般来说都会需要完整内容。
  - 记忆存储：
    - `MEMORY.md`等全局记忆，只用于记录必要信息，例如用户偏好等。这一点同 OpenClaw。
    - 使用类似图书馆/记忆库的形式，管理记忆内容。
      - 按照用户记忆/特定目录记忆分类。如果在特定目录开始会话，只提供全局+该目录对应记忆。
  - 暂不使用Embeddings模型，但应支持字符串搜索。
